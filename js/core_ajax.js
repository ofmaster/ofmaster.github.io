!function(e){if(!e.BX.ajax){var a=e.BX,t={},o={method:"GET",dataType:"html",timeout:0,async:!0,processData:!0,scriptsRunFirst:!1,emulateOnload:!0,skipAuthCheck:!1,start:!0,cache:!0,preparePost:!0,headers:!1,lsTimeout:30,lsForce:!1},r=null,n={},s={url_utf:/[^\034-\254]+/g,script_self:/\/bitrix\/js\/main\/core\/core(_ajax)*.js$/i,script_self_window:/\/bitrix\/js\/main\/core\/core_window.js$/i,script_self_admin:/\/bitrix\/js\/main\/core\/core_admin.js$/i,script_onload:/window.onload/g};a.ajax=function(e){var r;if(!e||!e.url||!a.type.isString(e.url))return!1;for(var n in t)void 0===e[n]&&(e[n]=t[n]);for(n in t={},o)void 0===e[n]&&(e[n]=o[n]);if(e.method=e.method.toUpperCase(),a.localStorage||(e.lsId=null),a.browser.IsIE()){var i=s.url_utf.exec(e.url);if(i)do{e.url=e.url.replace(i,a.util.urlencode(i)),i=s.url_utf.exec(e.url)}while(i)}"json"==e.dataType&&(e.emulateOnload=!1),e.cache||"GET"!=e.method||(e.url=a.ajax._uncache(e.url)),"POST"==e.method&&e.preparePost&&(e.data=a.ajax.prepareData(e.data));var u=!0;if(e.lsId&&!e.lsForce){var l=a.localStorage.get("ajax-"+e.lsId);if(null!==l){u=!1;var c=function(t){if(t.key=="ajax-"+e.lsId&&"BXAJAXWAIT"!=t.value){var o=t.value;!!t.oldValue&&null==o?e.onfailure&&e.onfailure("timeout"):a.ajax.__run(e,o),a.removeCustomEvent("onLocalStorageChange",c)}};"BXAJAXWAIT"==l?a.addCustomEvent("onLocalStorageChange",c):setTimeout((function(){c({key:"ajax-"+e.lsId,value:l})}),10)}}if(u){if(e.xhr=a.ajax.xhr(),!e.xhr)return;if(e.lsId&&a.localStorage.set("ajax-"+e.lsId,"BXAJAXWAIT",e.lsTimeout),e.xhr.open(e.method,e.url,e.async),e.skipBxHeader||a.ajax.isCrossDomain(e.url)||e.xhr.setRequestHeader("Bx-ajax","true"),"POST"==e.method&&e.preparePost&&e.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"object"==typeof e.headers)for(n=0;n<e.headers.length;n++)e.xhr.setRequestHeader(e.headers[n].name,e.headers[n].value);var h=!1,p=e.xhr.onreadystatechange=function(t){if(!h)if("timeout"===t)e.onfailure&&e.onfailure("timeout"),a.onCustomEvent(e.xhr,"onAjaxFailure",["timeout","",e]),e.xhr.onreadystatechange=a.DoNothing,e.xhr.abort(),e.async&&(e.xhr=null);else if(4==e.xhr.readyState||"run"==t){if(r=a.ajax.xhrSuccess(e.xhr)?"success":"error",h=!0,e.xhr.onreadystatechange=a.DoNothing,"success"==r){var o=!e.skipAuthCheck&&!a.ajax.isCrossDomain(e.url)&&e.xhr.getResponseHeader("X-Bitrix-Ajax-Status");if(o&&"Authorize"==o)e.onfailure&&e.onfailure("auth",e.xhr.status),a.onCustomEvent(e.xhr,"onAjaxFailure",["auth",e.xhr.status,e]);else{var n=e.xhr.responseText;e.lsId&&a.localStorage.set("ajax-"+e.lsId,n,e.lsTimeout),a.ajax.__run(e,n)}}else e.onfailure&&e.onfailure("status",e.xhr.status),a.onCustomEvent(e.xhr,"onAjaxFailure",["status",e.xhr.status,e]);e.async&&(e.xhr=null)}};return e.async&&e.timeout>0&&setTimeout((function(){e.xhr&&!h&&p("timeout")}),1e3*e.timeout),e.start&&(e.xhr.send(e.data),e.async||p("run")),e.xhr}},a.ajax.xhr=function(){if(e.XMLHttpRequest)try{return new XMLHttpRequest}catch(e){}else if(e.ActiveXObject){try{return new e.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new e.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new e.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}return null},a.ajax.isCrossDomain=function(t,o){if(o=o||e.location,0===t.indexOf("//")&&(t=o.protocol+t),0!==t.indexOf("http"))return!1;var r=e.document.createElement("a");return r.href=t,r.protocol!==o.protocol||r.hostname!==o.hostname||a.ajax.getHostPort(r.protocol,r.host)!==a.ajax.getHostPort(o.protocol,o.host)},a.ajax.getHostPort=function(e,a){var t=/:(\d+)$/.exec(a);return t?t[1]:"http:"===e?"80":"https:"===e?"443":""},a.ajax.__prepareOnload=function(t){if(t.length>0){a.ajax["onload_"+r]=null;for(var o=0,n=t.length;o<n;o++)t[o].isInternal&&(t[o].JS=t[o].JS.replace(s.script_onload,"BX.ajax.onload_"+r))}a.CaptureEventsGet(),a.CaptureEvents(e,"load")},a.ajax.__runOnload=function(){null!=a.ajax["onload_"+r]&&(a.ajax["onload_"+r].apply(e),a.ajax["onload_"+r]=null);var t=a.CaptureEventsGet();if(t)for(var o=0;o<t.length;o++)t[o].apply(e)},a.ajax.__run=function(e,t){e.processData?t=a.ajax.processRequestData(t,e):(e.onsuccess&&e.onsuccess(t),a.onCustomEvent(e.xhr,"onAjaxSuccess",[t,e]))},a.ajax._onParseJSONFailure=function(e){this.jsonFailure=!0,this.jsonResponse=e,this.jsonProactive=/^\[WAF\]/.test(e)},a.ajax.processRequestData=function(e,t){var o,n=[],s=[];switch(t.dataType.toUpperCase()){case"JSON":a.addCustomEvent(t.xhr,"onParseJSONFailure",a.proxy(a.ajax._onParseJSONFailure,t)),o=a.parseJSON(e,t.xhr),a.removeCustomEvent(t.xhr,"onParseJSONFailure",a.proxy(a.ajax._onParseJSONFailure,t));break;case"SCRIPT":n.push({isInternal:!0,JS:e,bRunFirst:t.scriptsRunFirst}),t.processScriptsConsecutive=!0,o=e;break;default:var i=a.processHTML(e,t.scriptsRunFirst);o=i.HTML,n=i.SCRIPT,s=i.STYLE}var u=!1;null==r&&(r=parseInt(1e6*Math.random()),u=!0),s.length>0&&a.loadCSS(s),t.emulateOnload&&a.ajax.__prepareOnload(n);var l=a.DoNothing;(t.emulateOnload||u)&&(l=a.defer((function(){t.emulateOnload&&a.ajax.__runOnload(),u&&(r=null),a.onCustomEvent(t.xhr,"onAjaxSuccessFinish",[t])})));try{if(t.jsonFailure)throw{type:"json_failure",data:t.jsonResponse,bProactive:t.jsonProactive};t.scripts=n,a.ajax.processScripts(t.scripts,!0),t.onsuccess&&t.onsuccess(o),a.onCustomEvent(t.xhr,"onAjaxSuccess",[o,t]),t.processScriptsConsecutive?(a.ajax.processScriptsConsecutive(t.scripts,!1),l()):a.ajax.processScripts(t.scripts,!1,l)}catch(e){t.onfailure&&t.onfailure("processing",e),a.onCustomEvent(t.xhr,"onAjaxFailure",["processing",e,t])}},a.ajax.processScripts=function(e,t,o){var r=[],n="";o=o||a.DoNothing;for(var s=0,i=e.length;s<i;s++)void 0!==t&&t!=!!e[s].bRunFirst||(e[s].isInternal?n+=";"+e[s].JS:r.push(e[s].JS));var u=(r=a.util.array_unique(r)).length,l=u,c=n.length>0?function(){a.evalGlobal(n)}:a.DoNothing;if(u>0){var h=function(){--l<=0&&(c(),o(),c=a.DoNothing)};for(s=0;s<u;s++)a.loadScript(r[s],h)}else c(),o()},a.ajax.processScriptsConsecutive=function(e,t){for(var o=0,r=e.length;o<r;o++)null!=t&&t!=!!e[o].bRunFirst||(e[o].isInternal?a.evalGlobal(e[o].JS):a.ajax.loadScriptAjax([e[o].JS]))},a.ajax.prepareData=function(e,t){var o="";if(a.type.isString(e))o=e;else if(null!=e)for(var r in e)if(e.hasOwnProperty(r)){o.length>0&&(o+="&");var n=a.util.urlencode(r);t&&(n=t+"["+n+"]"),"object"==typeof e[r]?o+=a.ajax.prepareData(e[r],n):o+=n+"="+a.util.urlencode(e[r])}return o},a.ajax.xhrSuccess=function(e){return e.status>=200&&e.status<300||304===e.status||1223===e.status||0===e.status},a.ajax.Setup=function(e,a){for(var r in a=!!a,e)a?t[r]=e[r]:o[r]=e[r]},a.ajax.replaceLocalStorageValue=function(e,t,o){a.localStorage&&a.localStorage.set("ajax-"+e,t,o)},a.ajax._uncache=function(e){return e+(-1!==e.indexOf("?")?"&":"?")+"_="+(new Date).getTime()},a.ajax.get=function(e,t,o){return a.type.isFunction(t)&&(o=t,t=""),(t=a.ajax.prepareData(t))&&(e+=(-1!==e.indexOf("?")?"&":"?")+t,t=""),a.ajax({method:"GET",dataType:"html",url:e,data:"",onsuccess:o})},a.ajax.getCaptcha=function(e){return a.ajax.loadJSON("/bitrix/tools/ajax_captcha.php",e)},a.ajax.insertToNode=function(e,o){if(o=a(o)){var r={cancel:!1};if(a.onCustomEvent("onAjaxInsertToNode",[{url:e,node:o,eventArgs:r}]),!0===r.cancel)return;var n=null;return t.denyShowWait||(n=a.showWait(o),delete t.denyShowWait),a.ajax.get(e,(function(e){o.innerHTML=e,a.closeWait(o,n)}))}},a.ajax.post=function(e,t,o){return t=a.ajax.prepareData(t),a.ajax({method:"POST",dataType:"html",url:e,data:t,onsuccess:o})},a.ajax.loadScriptAjax=function(e,t,o){if(a.type.isArray(e))for(var r=0,i=e.length;r<i;r++)a.ajax.loadScriptAjax(e[r],t,o);else{var u=e.replace(/\.js\?.*/,".js");if(s.script_self.test(u))return;if(s.script_self_window.test(u)&&a.CWindow)return;if(s.script_self_admin.test(u)&&a.admin)return;if(void 0===n[u])return o?(n[u]="",a.loadScript(e)):a.ajax({url:e,method:"GET",dataType:"script",processData:!0,emulateOnload:!1,scriptsRunFirst:!0,async:!1,start:!0,onsuccess:function(e){n[u]=e,t&&t(e)}});t&&t(n[u])}},a.ajax.loadJSON=function(e,t,o,r){return a.type.isFunction(t)&&(r=o,o=t,t=""),(t=a.ajax.prepareData(t))&&(e+=(-1!==e.indexOf("?")?"&":"?")+t,t=""),a.ajax({method:"GET",dataType:"json",url:e,onsuccess:o,onfailure:r})},a.ajax.load=function(e,t){a.type.isArray(e)||(e=[e]);var o=0;a.type.isFunction(t)||(t=a.DoNothing);for(var r=function(e){a.type.isFunction(this.callback)&&this.callback(e),++o>=s&&t()},n=0,s=e.length;n<s;n++)switch(e[n].type.toUpperCase()){case"SCRIPT":a.loadScript([e[n].url],a.proxy(r,e[n]));break;case"CSS":a.loadCSS([e[n].url]),++o>=s&&t();break;case"JSON":a.ajax.loadJSON(e[n].url,a.proxy(r,e[n]));break;default:a.ajax.get(e[n].url,"",a.proxy(r,e[n]))}},a.ajax.submit=function(e,t){if(!e.target){if(null==e.BXFormTarget){var o="formTarget_"+Math.random();e.BXFormTarget=document.body.appendChild(a.create("IFRAME",{props:{name:o,id:o,src:"javascript:void(0)"},style:{display:"none"}}))}e.target=e.BXFormTarget.name}return e.BXFormCallback=t,a.bind(e.BXFormTarget,"load",a.proxy(a.ajax._submit_callback,e)),a.submit(e),!1},a.ajax.submitComponentForm=function(t,o,r){if(!t.target){if(null==t.BXFormTarget){var n="formTarget_"+Math.random();t.BXFormTarget=document.body.appendChild(a.create("IFRAME",{props:{name:n,id:n,src:"javascript:void(0)"},style:{display:"none"}}))}t.target=t.BXFormTarget.name}if(r)var s=a.showWait(o);return t.BXFormCallback=function(t){r&&a.closeWait(s);a(o).innerHTML=t,a.onCustomEvent("onAjaxSuccess",[null,null,function(){e.bxcompajaxframeonload&&setTimeout((function(){e.bxcompajaxframeonload(),e.bxcompajaxframeonload=null}),10)}])},a.bind(t.BXFormTarget,"load",a.proxy(a.ajax._submit_callback,t)),!0},a.ajax._submit_callback=function(){try{if(0!=this.BXFormTarget.contentWindow.location.href.indexOf("http"))return}catch(e){return}this.BXFormCallback&&this.BXFormCallback.apply(this,[this.BXFormTarget.contentWindow.document.body.innerHTML]),a.unbindAll(this.BXFormTarget)},a.ajax.prepareForm=function(e,a){a=a||{};var t,o,r,n=[],s=e.elements.length,i=0,u=0;if(e){for(t=0;t<s;t++)if(!(r=e.elements[t]).disabled)switch(r.type.toLowerCase()){case"text":case"textarea":case"password":case"hidden":case"select-one":n.push({name:r.name,value:r.value}),u+=r.name.length+r.value.length;break;case"file":if(r.files)for(o=0;o<r.files.length;o++)i++,n.push({name:r.name,value:r.files[o],file:!0}),u+=r.files[o].size;break;case"radio":case"checkbox":r.checked&&(n.push({name:r.name,value:r.value}),u+=r.name.length+r.value.length);break;case"select-multiple":for(var l=0;l<r.options.length;l++)r.options[l].selected&&(n.push({name:r.name,value:r.options[l].value}),u+=r.name.length+r.options[l].length)}t=0,u=0;for(var c=a;t<n.length;){var h=n[t].name.indexOf("[");if(-1==h)c[n[t].name]=n[t].value,c=a,t++;else{var p=n[t].name.substring(0,h),d=n[t].name.substring(h+1);c[p]||(c[p]=[]);var x=d.indexOf("]");-1==x?(c=a,t++):0==x?(c=c[p],n[t].name=""+c.length):(c=c[p],n[t].name=d.substring(0,x)+d.substring(x+1))}}}return{data:a,filesCount:i,roughSize:u}},a.ajax.submitAjax=function(t,o){if((o=o&&"object"==typeof o?o:{}).url=o.url||t.getAttribute("action"),o.data=a.ajax.prepareForm(t).data,e.FormData){var r=function(e,a,t){if(t&&"object"==typeof t&&(n=t,"[object File]"!=(s=Object.prototype.toString.call(n))&&"[object Blob]"!=s))for(var o in t)t.hasOwnProperty(o)&&r(e,""==a?o:a+"["+o+"]",t[o]);else e.append(a,t||"");var n,s},n=function(e){var t={};if(null!=e)if("object"==typeof e){for(var o in e)if(e.hasOwnProperty(o)){var r=a.util.urlencode(o);"object"==typeof e[o]&&!0!==e[o].file?t[r]=n(e[o]):!0===e[o].file?t[r]=e[o].value:t[r]=a.util.urlencode(e[o])}}else t=a.util.urlencode(e);return t},s=new e.FormData;"POST"!==o.method?(o.data=a.ajax.prepareData(o.data),o.data&&(o.url+=(-1!==o.url.indexOf("?")?"&":"?")+o.data,o.data="")):(!0===o.preparePost&&(o.data=n(o.data)),r(s,"",o.data),o.data=s),o.preparePost=!1,o.start=!1;var i=a.ajax(o);o.onprogress&&i.upload.addEventListener("progress",(function(e){var a=null;e.lengthComputable&&(e.total||e.totalSize)&&(a=100*e.loaded/(e.total||e.totalSize)),o.onprogress(e,a)})),i.send(s)}else a.ajax(o)},a.ajax.UpdatePageData=function(e){if(e.TITLE&&a.ajax.UpdatePageTitle(e.TITLE),(e.WINDOW_TITLE||e.TITLE)&&a.ajax.UpdateWindowTitle(e.WINDOW_TITLE||e.TITLE),e.NAV_CHAIN&&a.ajax.UpdatePageNavChain(e.NAV_CHAIN),e.CSS&&e.CSS.length>0&&a.loadCSS(e.CSS),e.SCRIPTS&&e.SCRIPTS.length>0){var t=function(o,r,n){if(r&&a.type.isArray(r.scripts))for(var s=0,i=e.SCRIPTS.length;s<i;s++)r.scripts.push({isInternal:!1,JS:e.SCRIPTS[s]});else a.loadScript(e.SCRIPTS,n);a.removeCustomEvent("onAjaxSuccess",t)};a.addCustomEvent("onAjaxSuccess",t)}else{var o=function(e,t,r){a.type.isFunction(r)&&r(),a.removeCustomEvent("onAjaxSuccess",o)};a.addCustomEvent("onAjaxSuccess",o)}},a.ajax.UpdatePageTitle=function(e){var t=a("pagetitle");t&&(t.removeChild(t.firstChild),t.firstChild?t.insertBefore(document.createTextNode(e),t.firstChild):t.appendChild(document.createTextNode(e)))},a.ajax.UpdateWindowTitle=function(e){document.title=e},a.ajax.UpdatePageNavChain=function(e){var t=a("navigation");t&&(t.innerHTML=e)},a.userOptions={options:null,bSend:!1,delay:5e3,path:"/bitrix/admin/user_options.php?"},a.userOptions.setAjaxPath=function(e){a.userOptions.path=-1==e.indexOf("?")?e+"?":e+"&"},a.userOptions.save=function(e,t,o,r,n){null==a.userOptions.options&&(a.userOptions.options={}),n=!!n,a.userOptions.options[e+"."+t+"."+o]=[e,t,o,r,n];var s=a.userOptions.__get();""!=s&&(document.cookie=a.message("COOKIE_PREFIX")+"_LAST_SETTINGS="+s+"&sessid="+a.bitrix_sessid()+"; expires=Thu, 31 Dec 2020 23:59:59 GMT; path=/;"),a.userOptions.bSend||(a.userOptions.bSend=!0,setTimeout((function(){a.userOptions.send(null)}),a.userOptions.delay))},a.userOptions.send=function(e){var t=a.userOptions.__get();a.userOptions.options=null,a.userOptions.bSend=!1,""!=t&&(document.cookie=a.message("COOKIE_PREFIX")+"_LAST_SETTINGS=; path=/;",a.ajax({method:"GET",dataType:"html",processData:!1,cache:!1,url:a.userOptions.path+t+"&sessid="+a.bitrix_sessid(),onsuccess:e}))},a.userOptions.del=function(e,t,o,r){a.ajax.get(a.userOptions.path+"action=delete&c="+e+"&n="+t+(1==o?"&common=Y":"")+"&sessid="+a.bitrix_sessid(),r)},a.userOptions.__get=function(){if(!a.userOptions.options)return"";var e,t,o="",r=-1,n="";for(t in a.userOptions.options)a.userOptions.options.hasOwnProperty(t)&&(n!=(e=a.userOptions.options[t])[0]+"."+e[1]&&(o+="&p["+ ++r+"][c]="+a.util.urlencode(e[0]),o+="&p["+r+"][n]="+a.util.urlencode(e[1]),1==e[4]&&(o+="&p["+r+"][d]=Y"),n=e[0]+"."+e[1]),o+="&p["+r+"][v]["+a.util.urlencode(e[2])+"]="+a.util.urlencode(e[3]));return o.substr(1)},a.ajax.history={expected_hash:"",obParams:null,obFrame:null,obImage:null,obTimer:null,bInited:!1,bHashCollision:!1,bPushState:!(!history.pushState||!a.type.isFunction(history.pushState)),startState:null,init:function(t){if(!a.ajax.history.bInited){this.obParams=t;var o=this.obParams.getState();a.ajax.history.bPushState?(a.ajax.history.expected_hash=e.location.pathname,e.location.search&&(a.ajax.history.expected_hash+=e.location.search),a.ajax.history.put(o,a.ajax.history.expected_hash,"",!0),setTimeout((function(){a.bind(e,"popstate",a.ajax.history.__hashListener)}),500)):(a.ajax.history.expected_hash=e.location.hash,a.ajax.history.expected_hash&&"#"!=a.ajax.history.expected_hash||(a.ajax.history.expected_hash="__bx_no_hash__"),i.put(a.ajax.history.expected_hash,o),a.ajax.history.obTimer=setTimeout(a.ajax.history.__hashListener,500),a.browser.IsIE()?(a.ajax.history.obFrame=document.createElement("IFRAME"),a.hide_object(a.ajax.history.obFrame),document.body.appendChild(a.ajax.history.obFrame),a.ajax.history.obFrame.contentWindow.document.open(),a.ajax.history.obFrame.contentWindow.document.write(a.ajax.history.expected_hash),a.ajax.history.obFrame.contentWindow.document.close()):a.browser.IsOpera()&&(a.ajax.history.obImage=document.createElement("IMG"),a.hide_object(a.ajax.history.obImage),document.body.appendChild(a.ajax.history.obImage),a.ajax.history.obImage.setAttribute("src","javascript:location.href = 'javascript:BX.ajax.history.__hashListener();';"))),a.ajax.history.bInited=!0}},__hashListener:function(t){if(t=t||e.event||{state:!1},a.ajax.history.bPushState)a.ajax.history.obParams.setState(t.state||a.ajax.history.startState);else{var o;if(a.ajax.history.obTimer&&(e.clearTimeout(a.ajax.history.obTimer),a.ajax.history.obTimer=null),(o=null!=a.ajax.history.obFrame?a.ajax.history.obFrame.contentWindow.document.body.innerText:e.location.hash)&&"#"!=o||(o="__bx_no_hash__"),0==o.indexOf("#")&&(o=o.substring(1)),o!=a.ajax.history.expected_hash){var r=i.get(o);if(r&&(a.ajax.history.obParams.setState(r),a.ajax.history.expected_hash=o,null!=a.ajax.history.obFrame)){var n="__bx_no_hash__"==o?"":o;e.location.hash!=n&&e.location.hash!="#"+n&&(e.location.hash=n)}}a.ajax.history.obTimer=setTimeout(a.ajax.history.__hashListener,500)}},put:function(t,o,r,n){this.bPushState?n?a.ajax.history.startState=t:history.pushState(t,"",o):(o=void 0!==r?r:"view"+o,i.put(o,t),a.ajax.history.expected_hash=o,e.location.hash=a.util.urlencode(o),null!=a.ajax.history.obFrame&&(a.ajax.history.obFrame.contentWindow.document.open(),a.ajax.history.obFrame.contentWindow.document.write(o),a.ajax.history.obFrame.contentWindow.document.close()))},checkRedirectStart:function(t,o){var r=e.location.hash;"#"==r.substring(0,1)&&(r=r.substring(1));var n=r.substring(0,5);"view/"!=n&&"view%"!=n||(a.ajax.history.bHashCollision=!0,document.write('<div id="__ajax_hash_collision_'+o+'" style="display: none;">'))},checkRedirectFinish:function(t,o){document.write("</div>");var r=e.location.hash;"#"==r.substring(0,1)&&(r=r.substring(1)),a.ready((function(){var e=r.substring(0,5);if("view/"==e||"view%"==e){var n=a("__ajax_hash_collision_"+o),s=n.firstChild;a.cleanNode(s),n.style.display="block","view%"!=e&&(r=a.util.urlencode(r));var i="/bitrix/tools/ajax_redirector.php?hash="+(r+=(-1==r.indexOf("%3F")?"%3F":"%26")+t+"="+o);a.ajax.insertToNode(i,s)}}))}},a.ajax.component=function(e){this.node=e},a.ajax.component.prototype.getState=function(){var t={node:this.node,title:e.document.title,data:a(this.node).innerHTML},o=a("navigation");return null!=o&&(t.nav_chain=o.innerHTML),t},a.ajax.component.prototype.setState=function(e){a(e.node).innerHTML=e.data,a.ajax.UpdatePageTitle(e.title),e.nav_chain&&a.ajax.UpdatePageNavChain(e.nav_chain)};var i={arHistory:{},put:function(e,a){this.arHistory[e]=a},get:function(e){return this.arHistory[e]}};a.ajax.FormData=function(){this.elements=[],this.files=[],this.features={},this.isSupported(),this.log("BX FormData init")},a.ajax.FormData.isSupported=function(){var e=new a.ajax.FormData,t=e.features.supported;return e=null,t},a.ajax.FormData.prototype.log=function(e){0},a.ajax.FormData.prototype.isSupported=function(){var a={};return a.fileReader=e.FileReader&&e.FileReader.prototype.readAsBinaryString,a.readFormData=a.sendFormData=!!e.FormData,a.supported=!(!a.readFormData||!a.sendFormData),this.features=a,this.log("features:"),this.log(a),a.supported},a.ajax.FormData.prototype.append=function(e,a){"object"==typeof a?this.files.push({name:e,value:a}):this.elements.push({name:e,value:a})},a.ajax.FormData.prototype.send=function(e,t,o,r){if(this.log("FD send"),this.xhr=a.ajax({method:"POST",dataType:"html",url:e,onsuccess:t,onfailure:r,start:!1,preparePost:!1}),o&&this.xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&o(e.loaded/(e.total||e.totalSize))}),!1),this.features.readFormData&&this.features.sendFormData){var n=new FormData;for(var s in this.log("use browser formdata"),this.elements)this.elements.hasOwnProperty(s)&&n.append(this.elements[s].name,this.elements[s].value);for(s in this.files)this.files.hasOwnProperty(s)&&n.append(this.files[s].name,this.files[s].value);this.xhr.send(n)}return this.xhr},a.addCustomEvent("onAjaxFailure",a.debug)}}(window);